<!DOCTYPE html>
<html lang="en">
<head>
  <title>DInject Javalin controllers</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta id="layout-head" />
  <link rel="shortcut icon" href="/images/favicon.ico" >

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/pygments.css" type="text/css" />
  <link rel="stylesheet" href="/css/site.css">

</head>
  <body>
  <div id="wrap">
    <div id="header">
    <div class="navbar" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">
            <!--<img src="/images/lg5-21x100.png" height="35">-->
          </a>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav pull-right nav-btn-rhs">
            <li ><a href="/"><span class="fas fa-home"></span>  Home</a></li>
            <li ><a href="/docs">Docs</a></li>
            <li ><a target="_blank" href="/apidocs/current">ApiDocs</a></li>
            <li ><a href="https://github.com/dinject/dinject/releases">Releases</a></li>
            <li ><a target="_blank" href="https://github.com/dinject/dinject"> <i class="fab fa-github"></i></a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>

  </div>
  <div id="main">

<div class="jumbotron mini">
  <div class="container">
    <h1>Javalin</h1>
  </div>
</div>

<div class="container">
  <div class="row">

    <div class="col-md-9" role="main">
      

<!--<div class="jumbotron mini">-->
  <!--<div class="container">-->
    <!--<h1>Javalin controllers</h1>-->
  <!--</div>-->
<!--</div>-->

<!--<div class="container">-->

<h2>Introduction</h2>

<div class="container">
  <div class="row">
    <div class="col-md-3 feature">
      <iframe  width="250" height="160" src="https://www.youtube.com/embed/A3z7Z8xKsrE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
  </div>
</div>

<h2 id="getting-started">Getting started</h2>
<h4>Maven</h4>
<p>
  Add <code>dinject</code> and <code>dinject-controller</code> dependencies.
</p>
<div class="syntax xml"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>io.dinject<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>dinject<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.1<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>

<span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>io.dinject<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>dinject-controller<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.1<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
<p>
  Add the APT Annotation processors <code>dinject-generator</code> and <code>javalin-generator</code> typically
  as scope <code>provided</code>.
</p>
<div class="syntax xml"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>io.dinject<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>dinject-generator<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.1<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;scope&gt;</span>provided<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>

<span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>io.dinject<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>javalin-generator<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.1<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;scope&gt;</span>provided<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>


<h2 id="controller" class="erk">@Controller</h2>
<p>
  Create controllers with <code>@Path</code> and <code>@Controller</code>.  The <code>javalin-generator</code> will
  generate source code for mapping web routes to the controller method.
</p>
<div class="syntax java"><div class="highlight"><pre><span></span><span class="nd">@Controller</span>
<span class="nd">@Path</span><span class="o">(</span><span class="s">&quot;/hello&quot;</span><span class="o">)</span>
<span class="kd">class</span> <span class="nc">HelloController</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">MyService</span> <span class="n">myService</span><span class="o">;</span>

  <span class="nd">@Inject</span>
  <span class="n">HelloController</span><span class="o">(</span><span class="n">MyService</span> <span class="n">myService</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">myService</span> <span class="o">=</span> <span class="n">myService</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Get</span><span class="o">(</span><span class="s">&quot;/:id&quot;</span><span class="o">)</span>
  <span class="n">HelloDto</span> <span class="nf">getById</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">,</span> <span class="n">String</span> <span class="n">otherParam</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">...</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">HelloDto</span><span class="o">(...);</span>
  <span class="o">}</span>


  <span class="nd">@Post</span>
  <span class="kt">void</span> <span class="nf">save</span><span class="o">(</span><span class="n">HelloDto</span> <span class="n">dto</span><span class="o">,</span> <span class="n">Context</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// save hello data ...</span>
  <span class="o">}</span>

  <span class="nd">@Get</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="n">HelloDto</span><span class="o">&gt;</span> <span class="nf">getAll</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">myService</span><span class="o">.</span><span class="na">findAll</span><span class="o">();</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<p>
  The controllers can have dependencies as long as they are <code>@Singleton</code> (and DInject will then add
  them to the context used for dependency injection).
</p>

<h2 id="get">@Get</h2>
<p>
  Annotate methods on the controller with <code>@Get</code>, <code>@Put</code>, <code>@Post</code>, <code>@Delete</code>
  or <code>@Patch</code>. Methods with these annotations will be mapped to web routes.
</p>

<h2 id="context">Context</h2>
<p>
  Methods can use <code>io.javalin.Context</code> as a method argument. The web route will pass the context on to the
  controller method. We want to do this when we want full access including things like headers, cookies etc.
</p>
<div class="syntax java"><div class="highlight"><pre><span></span><span class="nd">@Post</span>
<span class="kt">void</span> <span class="nf">save</span><span class="o">(</span><span class="n">HelloDto</span> <span class="n">dto</span><span class="o">,</span> <span class="n">Context</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">// use javalin context, get cookies, headers ...</span>
<span class="o">}</span>
</pre></div>
</div>

<h2 id="conversions">Path type conversions</h2>
<p>
  There are built in type conversions for path and query parameters for the following types:
</p>
<ul>
  <li>int, long, short, float, double, boolean, Integer, Long, Short, Float, Double, Boolean</li>
  <li>BigDecimal, UUID, LocalDate, LocalTime, LocalDateTime</li>
</ul>
<p>
  If an argument fails type conversion then <code>InvalidPathArgumentException</code> is thrown. This exception could
  be mapped to a <code>404</code> response in the exception handler.
</p>
<p>
  Note that <code>path</code> conversions imply the value can NOT be null. Query parameters on the other hand
  effectively allow null (not specified) values - query parameters are deemed optional.
</p>

<h2 id="roles">@Roles</h2>
<p>
  An application can define a <code>@Roles</code> annotation. If the annotation matches the name <code>"Roles"</code>
  then it is deemed to define application security roles and generates appropriate code in the web route.
</p>
<div class="syntax java"><div class="highlight"><pre><span></span><span class="nd">@Roles</span><span class="o">({</span><span class="n">ANYONE</span><span class="o">})</span>
<span class="nd">@Get</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">HelloDto</span><span class="o">&gt;</span> <span class="nf">getAll</span><span class="o">()</span> <span class="o">{</span>
  <span class="o">...</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="syntax java"><div class="highlight"><pre><span></span><span class="n">ApiBuilder</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;/hello&quot;</span><span class="o">,</span> <span class="n">ctx</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="n">ctx</span><span class="o">.</span><span class="na">json</span><span class="o">(</span><span class="n">controller</span><span class="o">.</span><span class="na">getAll</span><span class="o">());</span>
  <span class="n">ctx</span><span class="o">.</span><span class="na">status</span><span class="o">(</span><span class="mi">200</span><span class="o">);</span>
<span class="o">},</span> <span class="n">roles</span><span class="o">(</span><span class="n">ANYONE</span><span class="o">));</span>
</pre></div>
</div>
<!--</div>-->

    </div>

    <div class="col-md-3" role="complementary">
      <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm">
        <ul class="nav bs-docs-sidenav">

<li class="active">
  <a href="/javalin/">Javalin</a>
<ul>
  <li><a href="/javalin#getting-started">Getting started</a></li>
  <li><a href="/javalin#controller">@Controller</a></li>
  <li><a href="/javalin#get">@Get</a></li>
  <li><a href="/javalin#context">Context</a></li>
  <li><a href="/javalin#conversions">Type conversions</a></li>
  <li><a href="/javalin#roles">@Roles</a></li>
  <li><a href="/javalin/#list">List</a></li>
  <li><a href="/javalin/#provider">Provider</a></li>
</ul>
</li>

        </ul>
      </nav>
    </div>
  </div>
</div>


  </div>
</div>


<footer id="footer">
  <div class="doc-footer">
    <ul class="doc-footer-links">
      <li> </li>
      <li> | </li>
      <li> | </li>
    </ul>
  </div>
</footer>

  <script type="text/javascript">
    var categoryNames = {};
  </script>

  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="/js/bootstrap.min.js"></script>
  <script src="/js/jquery.easing.min.js"></script>

    <script src="/js/jquery.storageapi.min.js"></script>
  <script src="/js/ebean-site.js"></script>
  <script src="/js/extra.js"></script>


  </body>
</html>
